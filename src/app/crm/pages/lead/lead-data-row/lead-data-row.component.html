<!---->
<div class="card" [@fade]="localVisibility">
  <div class="card-header p-0 d-flex justify-content-between">
    <h4 class="card-title">Lead Details</h4>
    <div class="actions float-right">
      <i class="ft-edit cursor-pointer mr-1 info"></i>
      <i class="ft-trash-2 cursor-pointer danger"></i>
    </div>
  </div>
  <hr />
  <div class="card-content">
    <div class="card-body">
      <ngb-tabset [justify]="'fill'">
        <ngb-tab title="Basic Details">
          <ng-template ngbTabContent>
            <div class="row" matchHeight="card">
              <div class="col-md-4 col-sm-12">
                <div class="card bg-warning">
                  <div class="card-content">
                    <div class="px-3 py-3">
                      <div class="media">
                        <div class="media-left align-self-center">
                          <i
                            class="fa fa-search white font-large-3 float-left"
                          ></i>
                        </div>
                        <div class="media-body text-right">
                          <h3 class="mb-1 white">{{ data?.source }}</h3>
                          <span class="white">Lead Source</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 col-sm-12">
                <div class="card bg-danger">
                  <div class="card-content">
                    <div class="px-3 py-3">
                      <div class="media">
                        <div class="media-left align-self-center">
                          <i
                            class="fa fa-cog white font-large-3 float-left"
                          ></i>
                        </div>
                        <div class="media-body text-right">
                          <h3 class="mb-1 white">{{ data?.tasks_count }}</h3>
                          <span class="white">Tasks</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle>Tasks</ng-template>
          <ng-template ngbTabContent>
            <div class="d-flex justify-content-center">
              <button
                class="btn btn-outline-primary btn-fab btn-round"
                (click)="openTaskModal()"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
            <ul class="list-group">
              <ng-container *ngFor="let task of data?.due_tasks">
                <li
                  class="list-group-item list-group-item-danger d-flex justify-content-between align-items-center"
                >
                  {{ task.title }}
                  <span>
                    <a class="btn btn-sm btn-fab btn-outline-info blue" (click)="markTaskAsDone(task.id)">
                      <i class="fa fa-check"></i>
                    </a>
                  </span>
                </li>
              </ng-container>
              <li class="list-group-item list-group-item-warning">
                This Task's due time is near
              </li>
              <li class="list-group-item list-group-item-secondary">
                This Task is normal
              </li>
              <li class="list-group-item list-group-item-success">
                <i class="ft-check-circle primary"></i> This Task is complete
              </li>
            </ul>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle>
            Contact Details
          </ng-template>
          <ng-template ngbTabContent>
            <div class="d-flex justify-content-center">
              <button class="btn btn-outline-primary btn-fab btn-round">
                <i class="fa fa-plus"></i>
              </button>
            </div>
            <ul
              class="list-group"
              *ngFor="let contact of data?.contacts; let i = index"
            >
              <li class="list-group-item flex-column align-items-start mb-3">
                <div class="d-flex w-100 justify-content-between">
                  <h5>Contact Name {{ i + 1 }}</h5>
                </div>
                <div class="d-flex w-100 justify-content-around">
                  <span
                    >Email:
                    <a href="mailto:{{ contact.email }}">{{
                      contact.email
                    }}</a></span
                  >
                  <span class="semi-bold"
                    >Primary Phone: {{ contact.primary_contact_number }}</span
                  >
                  <span
                    >Secondary Phone:
                    {{ contact.secondary_contact_number }}</span
                  >
                  <span>Designation: {{ contact.designation }}</span>
                </div>
              </li>
            </ul>
          </ng-template>
        </ngb-tab>
        <ngb-tab>
          <ng-template ngbTabTitle>
            Actions Taken
          </ng-template>
          <ng-template ngbTabContent>
            <ul class="list-group">
              <li class="list-group-item">
                <span>SomeOne added Contact</span>
              </li>
              <li class="list-group-item">
                <span>Employee 1 changed lead status to "Qualified"</span>
              </li>
              <li class="list-group-item">
                <span>Employee 1 attempted call at 15:30</span>
              </li>
            </ul>
          </ng-template>
        </ngb-tab>
      </ngb-tabset>
    </div>
  </div>
</div>
